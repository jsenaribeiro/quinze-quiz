"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8095],{8095:(A,p,a)=>{a.r(p),a.d(p,{QuizPage:()=>C});var l=a(5861),d=a(650),_=a(4755),f=a(5030),h=a(5740),o=(a(4627),a(3020)),P=a(3749);function v(n,i){if(1&n){const e=o.EpF();o.TgZ(0,"div",7),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.onResposta(s.texto))}),o.TgZ(1,"pre"),o._uU(2),o.qZA(),o.TgZ(3,"aside"),o._uU(4),o.qZA()()}if(2&n){const e=i.$implicit,t=i.index,r=o.oxw(2);o.xp6(2),o.Oqu(r.getLetra(t)),o.xp6(2),o.Oqu(e.texto)}}function x(n,i){if(1&n&&(o.TgZ(0,"section")(1,"strong"),o._uU(2),o.qZA(),o.YNc(3,v,5,2,"div",6),o.qZA()),2&n){const e=o.oxw();o.xp6(2),o.Oqu(e.questao.texto),o.xp6(1),o.Q6J("ngForOf",e.questao.opcoes)}}function O(n,i){1&n&&(o.TgZ(0,"h1"),o._uU(1,"Parab\xe9ns, voc\xea acertou! Ganhou 1 ponto!"),o.qZA())}function T(n,i){1&n&&(o.TgZ(0,"h1"),o._uU(1,"Voc\xea errou!"),o.qZA())}function E(n,i){1&n&&(o.TgZ(0,"h3"),o._uU(1,"A resposta correta \xe9"),o.qZA())}function M(n,i){if(1&n&&(o.TgZ(0,"h4"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.correta)}}function Z(n,i){if(1&n&&(o.TgZ(0,"section",8),o.YNc(1,O,2,0,"h1",4),o.YNc(2,T,2,0,"h1",4),o.YNc(3,E,2,0,"h3",4),o.YNc(4,M,2,1,"h4",4),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.acertou),o.xp6(1),o.Q6J("ngIf",!e.acertou),o.xp6(1),o.Q6J("ngIf",!e.acertou),o.xp6(1),o.Q6J("ngIf",!e.acertou)}}let C=(()=>{class n{constructor(e){this.service=e,this.jogador={},this.questao={},this.acertou=!1,this.respondeu=!1,this.correta="",this.getLetra=t=>String.fromCharCode(t+65),this.service.changeBackground("lightblue"),this.carregando(void 0)}onResposta(e){var t;const s={resposta:e,pergunta:this.questao},c=this.service.api("jogador");c.update(s),0==c.fase.tipo&&(this.correta=null!==(t=this.questao.opcoes.filter(u=>u.pontos>0).map(u=>u.texto).find(u=>!0))&&void 0!==t?t:"",this.acertou=e==this.correta,setTimeout(()=>this.onRespondido(),300+3*this.correta.length))}onRespondido(){var e=this;return(0,l.Z)(function*(){e.correta="",e.respondeu=!1;const t=e.service.api("jogo").cached,{cached:r,fase:s,questao:c}=e.service.api("jogador"),g=s.questoes.length==c.id+1;return g&&t.fases.length==s.id+1?e.service.route("/final"):g?(r.faseId+=1,r.questaoId=0,yield e.carregando(r),e.service.route("/intro")):(r.questaoId++,void(yield e.carregando(r)))})()}carregando(e){var t=this;return(0,l.Z)(function*(){e&&(yield t.service.api("jogador").update(e)),t.jogador=t.service.api("jogador").cached,t.questao=t.service.api("jogador").questao})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(P.zi))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-quiz"]],standalone:!0,features:[o.jDz],decls:10,vars:8,consts:[[3,"username","scoring","ranking"],[3,"fullscreen"],[1,"container"],["id","status"],[4,"ngIf"],["id","feed",4,"ngIf"],["id","option",3,"click",4,"ngFor","ngForOf"],["id","option",3,"click"],["id","feed"]],template:function(e,t){1&e&&(o._UZ(0,"quiz-header",0),o.TgZ(1,"ion-content",1)(2,"main",2)(3,"section",3)(4,"b"),o._uU(5),o.qZA(),o.TgZ(6,"b"),o._uU(7),o.qZA()(),o.YNc(8,x,4,2,"section",4),o.YNc(9,Z,5,4,"section",5),o.qZA()()),2&e&&(o.Q6J("username",t.jogador.nome)("scoring",t.jogador.pontuacao)("ranking",t.jogador.ranking||1),o.xp6(1),o.Q6J("fullscreen",!0),o.xp6(4),o.hij("Fase ",t.jogador.faseId+1," | "),o.xp6(2),o.hij("Questao ",t.jogador.questaoId+1,""),o.xp6(1),o.Q6J("ngIf",!t.respondeu),o.xp6(1),o.Q6J("ngIf",t.respondeu))},dependencies:[d.Pc,d.W2,_.ez,_.sg,_.O5,f.u5,h.G],styles:["#option[_ngcontent-%COMP%]{padding:10px;display:grid;align-items:center;border-radius:var(--roundness);background:var(--ion-color-primary);grid-template-columns:25px 1fr;white-space:pre-wrap;margin-bottom:10px}#option[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0;padding:5px}#option[_ngcontent-%COMP%] > pre[_ngcontent-%COMP%]{font-size:2rem;padding-right:1.9rem;border-right:dotted 2px var(--ion-color-warning);color:var(--ion-color-warning);font-weight:700}#option[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]{padding-left:20px;text-align:justify;color:var(--ion-color-light)}#option[_ngcontent-%COMP%]:hover{filter:invert(1)}strong[_ngcontent-%COMP%]{display:block;font-size:1.3rem;margin-bottom:20px}#status[_ngcontent-%COMP%]{opacity:.75}"]}),n})()}}]);