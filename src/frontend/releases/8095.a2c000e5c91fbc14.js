"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8095],{8095:(B,l,a)=>{a.r(l),a.d(l,{QuizPage:()=>D});var O=a(5861),g=a(650),f=a(6083),d=a(4755),m=a(5030),P=a(5740),o=(a(4627),a(3020)),h=a(7085),I=a(2755),T=a(8834);function M(e,s){if(1&e&&(o.TgZ(0,"section",6)(1,"b"),o._uU(2),o.qZA(),o.TgZ(3,"b"),o._uU(4),o.qZA()()),2&e){const n=o.oxw();o.xp6(2),o.hij("Fase ",n.db.jogador.faseId+1," | "),o.xp6(2),o.hij("Questao ",n.db.jogador.questaoId+1,"")}}function b(e,s){if(1&e){const n=o.EpF();o.TgZ(0,"button",8),o.NdJ("click",function(){const c=o.CHM(n).$implicit,i=o.oxw(2);return o.KtG(i.onResposta(c.texto))}),o.TgZ(1,"pre"),o._uU(2),o.qZA(),o.TgZ(3,"aside"),o._uU(4),o.qZA()()}if(2&e){const n=s.$implicit,t=s.index,r=o.oxw(2);o.Q6J("disabled",r.loading),o.xp6(2),o.Oqu(r.getLetra(t)),o.xp6(2),o.Oqu(n.texto)}}function Q(e,s){if(1&e&&(o.TgZ(0,"section")(1,"strong"),o._uU(2),o.qZA(),o.YNc(3,b,5,3,"button",7),o.qZA()),2&e){const n=o.oxw();o.xp6(2),o.Oqu(n.db.questao.texto),o.xp6(1),o.Q6J("ngForOf",n.db.questao.opcoes)}}function v(e,s){1&e&&(o.TgZ(0,"h1"),o._uU(1,"Parab\xe9ns, voc\xea acertou! Ganhou 1 ponto!"),o.qZA())}function C(e,s){1&e&&(o.TgZ(0,"h1"),o._uU(1,"Voc\xea errou!"),o.qZA())}function A(e,s){1&e&&(o.TgZ(0,"h3"),o._uU(1,"A resposta correta \xe9"),o.qZA())}function Z(e,s){if(1&e&&(o.TgZ(0,"h4"),o._uU(1),o.qZA()),2&e){const n=o.oxw(2);o.xp6(1),o.Oqu(n.correta)}}function z(e,s){if(1&e&&(o.TgZ(0,"section",9),o.YNc(1,v,2,0,"h1",4),o.YNc(2,C,2,0,"h1",4),o.YNc(3,A,2,0,"h3",4),o.YNc(4,Z,2,1,"h4",4),o.qZA()),2&e){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",n.acertou),o.xp6(1),o.Q6J("ngIf",!n.acertou),o.xp6(1),o.Q6J("ngIf",!n.acertou),o.xp6(1),o.Q6J("ngIf",!n.acertou)}}let D=(()=>{class e{constructor(n,t,r,c){this.app=n,this.db=t,this.api=r,this.router=c,this.correta="",this.acertou=!1,this.respondeu=!1,this.getLetra=i=>String.fromCharCode(i+65),this.app.changeBackground(t.imagem)}get loading(){return f.K.loading}onResposta(n){var t=this;return(0,O.Z)(function*(){var r;t.correta=null!==(r=t.db.questao.opcoes.filter(u=>u.pontos>0).map(u=>u.texto).find(u=>!0))&&void 0!==r?r:"",t.acertou=n==t.correta,t.respondeu=!0;const c=t.db.questao.opcoes.filter(u=>u.texto==n).find(u=>!0);if(void 0===c)throw"OpcaoId nao encontrada... ";const i={...t.db.jogador},x=t.db.jogo.fases.length-1==i.faseId,_=t.db.fase.questoes.length-1==i.questaoId,p=_&&x,U=t.db.getIndex("opcao",n),q=150+(t.acertou?0:3*t.correta.length);console.debug(0,i),console.debug(1,{ultimaQuestao:_,ultimaFase:x,ultimoTudo:p}),p&&console.warn("finalizou..."),i.pontuacao+=c.pontos,i.respostas.push({texto:n,opcaoId:U,faseId:c.faseId,questaoId:c.questaoId}),i.faseId+=_?1:0,i.questaoId+=_?-i.questaoId:1,yield t.api.jogador.update(i),_&&t.router.navigateByUrl("/intro"),p&&t.router.navigateByUrl("/final"),yield(0,f.Q)(q,()=>{t.correta="",t.acertou=!1,t.respondeu=!1})})()}}return e.\u0275fac=function(n){return new(n||e)(o.Y36(h.zi),o.Y36(I.Q),o.Y36(h.sM),o.Y36(T.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-quiz"]],standalone:!0,features:[o.jDz],decls:6,vars:7,consts:[[3,"username","scoring","ranking"],[3,"fullscreen"],[1,"container"],["id","status",4,"ngIf"],[4,"ngIf"],["id","feed",4,"ngIf"],["id","status"],[3,"disabled","click",4,"ngFor","ngForOf"],[3,"disabled","click"],["id","feed"]],template:function(n,t){1&n&&(o._UZ(0,"quiz-header",0),o.TgZ(1,"ion-content",1)(2,"main",2),o.YNc(3,M,5,2,"section",3),o.YNc(4,Q,4,2,"section",4),o.YNc(5,z,5,4,"section",5),o.qZA()()),2&n&&(o.Q6J("username",t.db.jogador.nome)("scoring",t.db.jogador.pontuacao)("ranking",t.db.jogador.ranking||1),o.xp6(1),o.Q6J("fullscreen",!0),o.xp6(2),o.Q6J("ngIf",!t.respondeu),o.xp6(1),o.Q6J("ngIf",!t.respondeu),o.xp6(1),o.Q6J("ngIf",t.respondeu))},dependencies:[g.Pc,g.W2,d.ez,d.sg,d.O5,m.u5,P.G],styles:["button[_ngcontent-%COMP%]{padding:10px;display:grid;align-items:center;border-radius:var(--roundness);background:var(--ion-color-primary);grid-template-columns:25px 1fr;white-space:pre-wrap;margin-bottom:10px;width:100%}button[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0;padding:5px}button[_ngcontent-%COMP%] > pre[_ngcontent-%COMP%]{font-size:2rem;padding-right:1.9rem;border-right:dotted 2px var(--ion-color-warning);color:var(--ion-color-warning);font-weight:700}button[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]{padding-left:20px;text-align:justify;color:var(--ion-color-light)}button[_ngcontent-%COMP%]:hover{filter:invert(1)}strong[_ngcontent-%COMP%]{display:block;font-size:1.3rem;margin-bottom:20px}#status[_ngcontent-%COMP%]{opacity:.75}"]}),e})()}}]);